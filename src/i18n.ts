import { i18n, createInstance } from "i18next";
import { initReactI18next } from "react-i18next";
import LanguageDetector from "i18next-browser-languagedetector";
import React from "react";

const languageDetector = new LanguageDetector();

export const LANGUAGES = ["en", "ru", "ka"] as const;
export type Language = typeof LANGUAGES[number];
export const NAMESPACES = ["common"] as const;
export type I18nNamespace = typeof NAMESPACES[number];

export const DEFAULT_LANGUAGE: Language = "ru";
export const DEFAULT_NAMESPACE: I18nNamespace = "common";

const enTranslation = {
  meta: {
    title: "Easy Alphabet",
    description: "Generated by create next app",
  },
  settings: {
    title: "Text and other settings",
    textarea: "Text to transform",
    symbolsLimit: "Paragraph symbol limit",
    showHints: "Show hints",
    resetAlphabet: "Reset alphabet",
    randomAlphabet: "Mix alphabet",
    currentLanguage: "Current language: {{language}}",
    resetText: "Reset text",
  },
  footer: {
    builtBy: "Built by <0>@luixo</0>",
    inspiredBy: "Inspired by <0>Maksim Solohin</0>",
    hySupport: "Support of Armenian (hy) alphabet <0>@chihayuschiy</0>",
  },
  languagePicker: {
    selectLanguage: "Choose an alphabet:",
  },
  alphabet: {
    mixed: "{{name}} (mixed)",
    names: {
      "ka-ru": "georgian → russian",
      "ru-ka": "russian → georgian",
      "ru-hy": "russian → armenian",
    },
  },
};

const ruTranslation: typeof enTranslation = {
  meta: {
    title: "Легкий алфавит",
    description: "Сгенерировано с помощью create-next-app",
  },
  settings: {
    title: "Текст и другие настройки",
    textarea: "Текст для перевода",
    symbolsLimit: "Количество символов на абзац",
    showHints: "Показывать подсказки",
    resetAlphabet: "Сбросить алфавит",
    randomAlphabet: "Перемешать алфавит",
    currentLanguage: "Текущий язык: {{language}}",
    resetText: "Сбросить текст",
  },
  footer: {
    builtBy: "Автор - <0>@luixo</0>",
    inspiredBy: "Оригинальная идея - <0>Максим Солохин</0>",
    hySupport: "Поддержка армянского (hy) алфавита - <0>@chihayuschiy</0>",
  },
  languagePicker: {
    selectLanguage: "Выбери алфавит:",
  },
  alphabet: {
    mixed: "{{name}} (перемешан)",
    names: {
      "ka-ru": "грузинский → русский",
      "ru-ka": "русский → грузинский",
      "ru-hy": "русский → армянский",
    },
  },
};

const kaTranslation: typeof enTranslation = {
  meta: {
    title: "მარტივი ანბანი",
    description: "გენერირებულია create-next-app დახმარებით",
  },
  settings: {
    title: "ტექსტი და სხვა პარამეტრები",
    textarea: "სათარგმნი ტექსტი",
    symbolsLimit: "სიმბოლოების რაოდენობა აბზაცში",
    showHints: "მინიშნებების ჩვენება",
    resetAlphabet: "ანბანის გადატვირთვა",
    randomAlphabet: "ანბანის არევა",
    currentLanguage: "აქტუალური ენა: {{language}}",
    resetText: "ტექსტის გადატვირთვა",
  },
  footer: {
    builtBy: "ავტორი - <0>@luixo</0>",
    inspiredBy: "ორიგინალური იდეა - <0>მაკსიმ  სოლოხინ</0>",
    hySupport: "სომხური (hy) ალფავიტის მხარდაჭერა - <0>@chihayuschiy</0>",
  },
  languagePicker: {
    selectLanguage: "აირჩიე ანბანი:",
  },
  alphabet: {
    mixed: "{{name}} (არეულოა)",
    names: {
      "ka-ru": "ქართული → რუსული",
      "ru-ka": "რუსული → ქართული",
      "ru-hy": "რუსული → სომხური",
    },
  },
};

export type ResourceType = {
  common: typeof enTranslation;
};

export const resources: Record<Language, ResourceType> = {
  en: { common: enTranslation },
  ru: { common: ruTranslation },
  ka: { common: kaTranslation },
};

export const getI18n = (language?: Language): i18n => {
  const instance = createInstance({
    resources,
    fallbackLng: DEFAULT_LANGUAGE,
    lng: language || DEFAULT_LANGUAGE,
    supportedLngs: LANGUAGES,
    defaultNS: DEFAULT_NAMESPACE,
    interpolation: {
      escapeValue: false,
    },
  })
    .use(initReactI18next)
    .use(languageDetector);
  return instance;
};

export const I18nContext = React.createContext<i18n | null>(null);
